import type { StockSnapshot } from "@shared/types";

const MOCK_STOCKS: Record<string, Omit<StockSnapshot, "meta">> = {
  AAPL: {
    symbol: "AAPL",
    companyName: "Apple Inc.",
    price: 185.92,
    change: 1.25,
    changePercent: 0.68,
    volume: 54000000,
    marketCap: 2800000000000,
    sector: "Technology",
    industry: "Consumer Electronics",
    fundamentals: {
      revenueGrowthYoY: [8.1, 5.5, 11.2],
      epsGrowthYoY: [10.5, 7.2, 13.8],
      peRatio: 28.5,
      priceToBook: 45.2,
      debtToEquity: 1.8,
    },
    technicals: {
      atr: 3.2,
      atrPercent: 1.79,
      rsi: 58,
      movingAverages: { ma20: 175.50, ma50: 172.30, ma200: 168.90 },
      priceVsMA50: 3.72,
      priceVsMA200: 5.82,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.72,
      institutionalOwnership: 72,
      institutionalTrend: "INCREASING",
      insiderBuying: true,
      analystRating: 4.2,
      analystPriceTarget: 195,
    },
    options: {
      impliedVolatility: 0.28,
      totalOpenInterest: 5200000,
      callOpenInterest: 3000000,
      putOpenInterest: 2200000,
    },
    historicalPrices: [],
  },
  MSFT: {
    symbol: "MSFT",
    companyName: "Microsoft Corporation",
    price: 405.22,
    change: 2.45,
    changePercent: 0.61,
    volume: 22000000,
    marketCap: 2800000000000,
    sector: "Technology",
    industry: "Software",
    fundamentals: {
      revenueGrowthYoY: [12.5, 15.2, 18.1],
      epsGrowthYoY: [8.2, 11.5, 14.3],
      peRatio: 32.1,
      priceToBook: 12.8,
      debtToEquity: 0.42,
    },
    technicals: {
      atr: 5.8,
      atrPercent: 1.53,
      rsi: 52,
      movingAverages: { ma20: 375.20, ma50: 368.50, ma200: 355.80 },
      priceVsMA50: 2.82,
      priceVsMA200: 6.49,
      weeklyTrend: "SIDEWAYS",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.65,
      institutionalOwnership: 74,
      institutionalTrend: "FLAT",
      insiderBuying: false,
      analystRating: 4.5,
      analystPriceTarget: 420,
    },
    options: {},
    historicalPrices: [],
  },
  GOOGL: {
    symbol: "GOOGL",
    companyName: "Alphabet Inc.",
    price: 151.72,
    change: 0.85,
    changePercent: 0.56,
    volume: 28000000,
    marketCap: 1780000000000,
    sector: "Technology",
    industry: "Internet Services",
    fundamentals: {
      revenueGrowthYoY: [6.5, 9.2, 13.5],
      epsGrowthYoY: [15.2, 18.8, 22.1],
      peRatio: 24.5,
      priceToBook: 5.8,
      debtToEquity: 0.12,
    },
    technicals: {
      atr: 2.8,
      atrPercent: 1.97,
      rsi: 48,
      movingAverages: { ma20: 143.50, ma50: 140.20, ma200: 135.60 },
      priceVsMA50: 1.14,
      priceVsMA200: 4.57,
      weeklyTrend: "UP",
      dailyTrend: "DOWN",
    },
    sentiment: {
      putCallRatio: 0.78,
      institutionalOwnership: 68,
      institutionalTrend: "INCREASING",
      insiderBuying: false,
      analystRating: 4.1,
      analystPriceTarget: 165,
    },
    options: {},
    historicalPrices: [],
  },
  AMZN: {
    symbol: "AMZN",
    companyName: "Amazon.com Inc.",
    price: 178.25,
    change: 1.15,
    changePercent: 0.65,
    volume: 45000000,
    marketCap: 1850000000000,
    sector: "Consumer Cyclical",
    industry: "Internet Retail",
    fundamentals: {
      revenueGrowthYoY: [9.8, 12.5, 11.2],
      epsGrowthYoY: [28.5, 35.2, 42.1],
      peRatio: 58.2,
      priceToBook: 8.5,
      debtToEquity: 0.58,
    },
    technicals: {
      atr: 4.2,
      atrPercent: 2.36,
      rsi: 62,
      movingAverages: { ma20: 175.80, ma50: 170.50, ma200: 158.90 },
      priceVsMA50: 4.54,
      priceVsMA200: 12.17,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.82,
      institutionalOwnership: 65,
      institutionalTrend: "INCREASING",
      insiderBuying: true,
      analystRating: 4.3,
      analystPriceTarget: 210,
    },
    options: {},
    historicalPrices: [],
  },
  NVDA: {
    symbol: "NVDA",
    companyName: "NVIDIA Corporation",
    price: 875.38,
    change: 12.45,
    changePercent: 1.44,
    volume: 42000000,
    marketCap: 2150000000000,
    sector: "Technology",
    industry: "Semiconductors",
    fundamentals: {
      revenueGrowthYoY: [122.5, 85.2, 45.8],
      epsGrowthYoY: [165.2, 110.5, 78.2],
      peRatio: 65.8,
      priceToBook: 48.5,
      debtToEquity: 0.41,
    },
    technicals: {
      atr: 22.5,
      atrPercent: 2.57,
      rsi: 68,
      movingAverages: { ma20: 865.20, ma50: 820.50, ma200: 650.80 },
      priceVsMA50: 6.69,
      priceVsMA200: 34.51,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.55,
      institutionalOwnership: 78,
      institutionalTrend: "INCREASING",
      insiderBuying: false,
      analystRating: 4.6,
      analystPriceTarget: 1000,
    },
    options: {},
    historicalPrices: [],
  },
  META: {
    symbol: "META",
    companyName: "Meta Platforms Inc.",
    price: 485.58,
    change: 5.12,
    changePercent: 1.07,
    volume: 18000000,
    marketCap: 1280000000000,
    sector: "Technology",
    industry: "Social Media",
    fundamentals: {
      revenueGrowthYoY: [16.2, 23.5, 27.8],
      epsGrowthYoY: [72.5, 85.2, 95.1],
      peRatio: 28.5,
      priceToBook: 8.2,
      debtToEquity: 0.28,
    },
    technicals: {
      atr: 12.5,
      atrPercent: 2.47,
      rsi: 65,
      movingAverages: { ma20: 498.50, ma50: 485.20, ma200: 420.50 },
      priceVsMA50: 4.28,
      priceVsMA200: 20.32,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.68,
      institutionalOwnership: 80,
      institutionalTrend: "INCREASING",
      insiderBuying: false,
      analystRating: 4.4,
      analystPriceTarget: 580,
    },
    options: {},
    historicalPrices: [],
  },
  TSLA: {
    symbol: "TSLA",
    companyName: "Tesla Inc.",
    price: 181.25,
    change: -2.34,
    changePercent: -1.27,
    volume: 95000000,
    marketCap: 790000000000,
    sector: "Consumer Cyclical",
    industry: "Auto Manufacturers",
    fundamentals: {
      revenueGrowthYoY: [3.2, 9.5, 18.8],
      epsGrowthYoY: [-15.2, -8.5, 12.1],
      peRatio: 72.5,
      priceToBook: 12.8,
      debtToEquity: 0.15,
    },
    technicals: {
      atr: 8.5,
      atrPercent: 3.42,
      rsi: 42,
      movingAverages: { ma20: 255.80, ma50: 262.50, ma200: 238.90 },
      priceVsMA50: -5.33,
      priceVsMA200: 4.02,
      weeklyTrend: "DOWN",
      dailyTrend: "DOWN",
    },
    sentiment: {
      putCallRatio: 1.15,
      institutionalOwnership: 45,
      institutionalTrend: "DECREASING",
      insiderBuying: true,
      analystRating: 3.2,
      analystPriceTarget: 280,
    },
    options: {},
    historicalPrices: [],
  },
  JPM: {
    symbol: "JPM",
    companyName: "JPMorgan Chase & Co.",
    price: 198.45,
    change: 1.89,
    changePercent: 0.96,
    volume: 8500000,
    marketCap: 570000000000,
    sector: "Financial Services",
    industry: "Banks",
    fundamentals: {
      revenueGrowthYoY: [8.5, 12.2, 6.8],
      epsGrowthYoY: [15.2, 18.5, 10.2],
      peRatio: 11.5,
      priceToBook: 1.65,
      debtToEquity: 1.2,
    },
    technicals: {
      atr: 3.2,
      atrPercent: 1.61,
      rsi: 55,
      movingAverages: { ma20: 195.50, ma50: 192.80, ma200: 178.50 },
      priceVsMA50: 2.93,
      priceVsMA200: 11.18,
      weeklyTrend: "SIDEWAYS",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.85,
      institutionalOwnership: 72,
      institutionalTrend: "FLAT",
      insiderBuying: false,
      analystRating: 4.0,
      analystPriceTarget: 215,
    },
    options: {},
    historicalPrices: [],
  },
  V: {
    symbol: "V",
    companyName: "Visa Inc.",
    price: 279.30,
    change: 2.15,
    changePercent: 0.78,
    volume: 6500000,
    marketCap: 560000000000,
    sector: "Financial Services",
    industry: "Credit Services",
    fundamentals: {
      revenueGrowthYoY: [10.5, 12.8, 11.2],
      epsGrowthYoY: [14.2, 16.5, 13.8],
      peRatio: 28.5,
      priceToBook: 14.2,
      debtToEquity: 0.55,
    },
    technicals: {
      atr: 4.5,
      atrPercent: 1.61,
      rsi: 58,
      movingAverages: { ma20: 276.50, ma50: 272.80, ma200: 262.50 },
      priceVsMA50: 2.38,
      priceVsMA200: 6.40,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {
      putCallRatio: 0.72,
      institutionalOwnership: 82,
      institutionalTrend: "INCREASING",
      insiderBuying: false,
      analystRating: 4.3,
      analystPriceTarget: 310,
    },
    options: {},
    historicalPrices: [],
  },
  PG: {
    symbol: "PG",
    companyName: "Procter & Gamble Co.",
    price: 165.42,
    change: -0.85,
    changePercent: -0.51,
    volume: 6200000,
    marketCap: 390000000000,
    sector: "Consumer Defensive",
    industry: "Household & Personal Products",
    fundamentals: {
      revenueGrowthYoY: [3.2, 4.5, 3.8],
      epsGrowthYoY: [5.1, 6.2, 5.5],
    },
    technicals: {
      atr: 2.1,
      atrPercent: 1.27,
      rsi: 52,
      movingAverages: { ma20: 162.50, ma50: 160.20, ma200: 155.80 },
      priceVsMA50: 3.26,
      priceVsMA200: 6.17,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {},
    options: {},
    historicalPrices: [],
  },
  HD: {
    symbol: "HD",
    companyName: "Home Depot Inc.",
    price: 362.15,
    change: 2.45,
    changePercent: 0.68,
    volume: 3800000,
    marketCap: 360000000000,
    sector: "Consumer Cyclical",
    industry: "Home Improvement Retail",
    fundamentals: {
      revenueGrowthYoY: [1.2, 2.5, 1.8],
      epsGrowthYoY: [2.1, 3.5, 2.8],
    },
    technicals: {
      atr: 5.5,
      atrPercent: 1.52,
      rsi: 58,
      movingAverages: { ma20: 355.20, ma50: 350.80, ma200: 335.60 },
      priceVsMA50: 3.23,
      priceVsMA200: 7.91,
      weeklyTrend: "UP",
      dailyTrend: "UP",
    },
    sentiment: {},
    options: {},
    historicalPrices: [],
  },
};

const BENCHMARK_PRICES: Record<string, number> = {
  AAPL: 185, MSFT: 405, GOOGL: 151, AMZN: 178, NVDA: 875, META: 485, TSLA: 181, JPM: 198, V: 279,
  PG: 165, HD: 362, UNH: 505, LLY: 752, AVGO: 1320, COST: 725, MA: 460, ABBV: 178, PEP: 172,
};

export function getBenchmarkPrice(symbol: string): number | null {
  return BENCHMARK_PRICES[symbol.toUpperCase()] || null;
}

export function getMockSnapshot(symbol: string): StockSnapshot | null {
  const mockData = MOCK_STOCKS[symbol.toUpperCase()];

  if (!mockData) {
    return null;
  }

  return {
    ...mockData,
    meta: {
      dataFreshness: new Date(),
      priceAvailable: false,
      providersUsed: ["Mock-Quote", "Mock-OHLC", "Mock-Fundamentals", "Mock-Sentiment", "Mock-Options"],
      providersFailed: ["Marketstack-EOD", "Finnhub-Sentiment", "Finnhub-Options"],
      confidence: "LOW",
      warnings: ["Using fallback mock data - live data providers unavailable"],
    },
  };
}

export function getAllMockSymbols(): string[] {
  return Object.keys(MOCK_STOCKS);
}
